<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Trading Prediction</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; display: flex; justify-content: center; }
        .container { max-width: 900px; margin: 0 20px; display: flex; }
        .sidebar { width: 300px; background-color: #f4f4f4; padding: 10px; border-radius: 5px; }
        .content { flex-grow: 1; margin-left: 20px; }
        h1, h3 { text-align: center; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; }
        select, input { width: 100%; padding: 10px; margin-top: 5px; }
        .btn { background-color: #007bff; color: white; padding: 10px; border: none; cursor: pointer; text-align: center; }
        .btn:hover { background-color: #0056b3; }
        .price-display, .clock-display, .prediction-result { margin-top: 20px; font-size: 1.5rem; text-align: center; }
        .loading { font-size: 1.2rem; color: grey; }
        .green-text { color: green; font-weight: bold; }
        .red-text { color: red; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid black; padding: 10px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

<div class="container">
    <!-- Sidebar for Candlestick Patterns -->
    <div class="sidebar">
        <h3>Candlestick Patterns</h3>
        <table>
            <thead><tr><th>Pair</th><th>Pattern</th><th>Time</th><th>Action</th></tr></thead>
            <tbody id="pattern-list"></tbody>
        </table>
    </div>

    <!-- Main content area -->
    <div class="content">
        <h1>Binary Trading Prediction</h1>

        <div class="form-group">
            <label for="currency-pair">Select Asset</label>
            <select id="currency-pair">
                <option value="EUR/USD">EUR/USD</option>
                <option value="AUD/USD">AUD/USD</option>
                <option value="USD/JPY">USD/JPY</option>
            </select>
        </div>

        <div class="form-group">
            <label for="time-frame">Select Time Frame</label>
            <select id="time-frame">
                <option value="1m">1 Minute</option>
                <option value="5m">5 Minutes</option>
            </select>
        </div>

        <div class="form-group">
            <label for="time-zone">Select Time Zone</label>
            <select id="time-zone">
                <option value="Etc/UTC">UTC</option>
                <option value="Asia/Kolkata">India (UTC+5:30)</option>
            </select>
        </div>

        <button class="btn" onclick="predictAndShowPrice()">Predict & Show Live Price</button>
        
        <div id="live-price" class="price-display">Live Price: <span id="price-value">Loading...</span></div>
        <div id="loading-indicator" class="loading"></div>
        <div id="clock" class="clock-display">Clock: --:--</div>
        <div id="patterns" class="prediction-result"></div>

        <h3>Prediction History</h3>
        <table>
            <thead><tr><th>Time</th><th>Pair</th><th>Direction</th><th>Result</th></tr></thead>
            <tbody id="prediction-table"></tbody>
        </table>
    </div>
</div>

<script>
    const API_KEY = 'YOUR_ALPHA_VANTAGE_API_KEY';
    let priceCache = {};
    let predictions = [];
    let lastPrediction = null;

    const detectedPatterns = { "EUR/USD": "Bullish Engulfing", "AUD/USD": "Bearish Engulfing" };

    function displayPatterns() {
        const tbody = document.getElementById('pattern-list');
        tbody.innerHTML = '';
        for (const [pair, pattern] of Object.entries(detectedPatterns)) {
            const time = new Date().toLocaleTimeString(), action = pattern.includes("Bullish") ? "Buy" : "Sell";
            tbody.innerHTML += `<tr><td>${pair}</td><td>${pattern}</td><td>${time}</td><td>${action}</td></tr>`;
        }
    }

    function startClock(timeZone) {
        setInterval(() => {
            const now = new Date().toLocaleTimeString('en-US', { timeZone });
            document.getElementById('clock').innerHTML = `Clock (${timeZone}): ${now}`;
        }, 1000);
    }

    async function fetchPrice(symbol) {
        if (priceCache[symbol]) return priceCache[symbol];
        document.getElementById('loading-indicator').innerHTML = "Fetching price...";
        try {
            const response = await fetch(`https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=${symbol.split('/')[0]}&to_currency=${symbol.split('/')[1]}&apikey=${API_KEY}`);
            const data = await response.json();
            const price = parseFloat(data['Realtime Currency Exchange Rate']['5. Exchange Rate']).toFixed(4);
            priceCache[symbol] = price;
            document.getElementById('loading-indicator').innerHTML = '';
            return price;
        } catch (error) {
            console.error('Error fetching price:', error);
            return 'Error';
        }
    }

    function predictNextCandle(pair, price) {
        const direction = Math.random() > 0.5 ? 'up' : 'down';
        const color = direction === 'up' ? `<span class="green-text">Green</span>` : `<span class="red-text">Red</span>`;
        return { message: `Next candle for ${pair}: ${color} (Price: ${price})`, direction };
    }

    function displayPrediction(prediction) {
        const now = new Date().toLocaleTimeString();
        const tbody = document.getElementById('prediction-table');
        const result = lastPrediction ? (lastPrediction.direction === prediction.direction ? 'Correct' : 'Wrong') : 'N/A';
        tbody.innerHTML += `<tr><td>${now}</td><td>${prediction.pair}</td><td>${prediction.direction === 'up' ? 'Up' : 'Down'}</td><td>${result}</td></tr>`;
        lastPrediction = prediction;
    }

    async function predictAndShowPrice() {
        const pair = document.getElementById("currency-pair").value;
        const timeZone = document.getElementById("time-zone").value;
        const price = await fetchPrice(pair);
        document.getElementById('price-value').innerHTML = price;
        displayPatterns();
        startClock(timeZone);

        const prediction = predictNextCandle(pair, price);
        document.getElementById('patterns').innerHTML = prediction.message;
        displayPrediction(prediction);
    }
</script>
</body>
</html>
